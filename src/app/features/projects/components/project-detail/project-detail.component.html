<div class="project-detail">
  <div class="project-detail-header">
    <a routerLink="/proyectos" class="back-link">← Volver a Proyectos</a>
  </div>

  @if (loading()) {
  <app-loading-spinner message="Cargando detalles del proyecto..."></app-loading-spinner>
  } @else if (error()) {
  <app-error-message [message]="error()!" (retry)="onRetry()"></app-error-message>
  } @else if (project()) {
  <app-card>
    <h1 class="project-title">{{ project()!.name }}</h1>
    <div class="project-status" [style.background-color]="project()!.status.color">
      {{ project()!.status.label }}
    </div>

    <div class="project-info">
      <div class="info-section">
        <h3>Descripción</h3>
        <p>{{ project()!.description }}</p>
      </div>

      <div class="info-section">
        <h3>Cronograma</h3>
        <p><strong>Fecha de inicio:</strong> {{ project()!.startDate | dateFormat:'medium' }}</p>
        <p><strong>Fecha de fin:</strong> {{ project()!.endDate | dateFormat:'medium' }}</p>
      </div>

      <div class="info-section">
        <h3>Progreso</h3>
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="project()!.progress"></div>
        </div>
        <p>{{ project()!.progress }}% Completado</p>
      </div>

      <div class="info-section">
        <h3>Presupuesto</h3>
        <p>${{ project()!.budget.toLocaleString() }}</p>
      </div>

      <div class="info-section">
        <h3>Miembros del Equipo</h3>
        <div class="team-members">
          @for (member of project()!.teamMembers; track member.id) {
          <div class="team-member">
            <div class="member-avatar">{{ member.name.charAt(0) }}</div>
            <div class="member-info">
              <p class="member-name">{{ member.name }}</p>
              <p class="member-role">{{ member.role }}</p>
            </div>
          </div>
          }
        </div>
      </div>
    </div>
  </app-card>
  }
</div>